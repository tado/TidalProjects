let 
  scale = getScale
    (scaleTable ++ [
      ("sho", [-3, -1, 1, 2, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 16, 18]),      
      ("kotsu", [-3, 4, 9, 11, 16, 18]),
      ("ichi", [-1, 2, 4, 9, 11, 18]),
      ("ku", [1, 2, 4, 8, 9, 11]),
      ("bo", [2, 4, 9, 11, 16, 18]),
      ("otsu", [4, 8, 9, 11, 13, 14]),
      ("ge", [6, 8, 9, 11, 14, 18]),
      ("ju", [6, 7, 8, 9])
    ])

setcps(80/240)

hush

do
  let scl = "ichi"
  d1
    $ s "superhammond"
    |+ note (scale scl "[0, 1, 2, 3, 4, 5]")
    |+ note (-0.398)
    -- |+ note 12
    |+ note "[0, 12]"
    -- |+ note (choose[-12, 0, 12])
    -- |+ note "[-0.04, 0.04]" 
    # attack 1.0 # hold 2 # release 1.0 # legato 2.0
    # leslie 0.5 # lrate 0.2 # lsize 0.8
    # room 0.2 # size 0.98
    -- # pan (rand)
    # voice 4
    # gain 0.8  
  d2
    $ jux (("[3, 10]"/14)~>)
    $ s "superhammond(4, 14, [0, 5])"
    |+ note (scale scl "[0, 1, 2, 3, 4, 5]")
    |+ note (-0.398)
    |+ note 12
    |+ note "[-12, 0]"
    |+ note (choose[0, 12, 24])
    -- |+ note "[-0.04, 0.0, 0.04]"
    # legato 0.9
    # leslie 0.5 # lrate 0.15 # lsize 0.8
    -- # room 0.2 # size 0.9
    # pan (rand)
    # voice 4
    # gain 0.7  
  d3
    $ jux (("[9]"/14)~>)
    $ s "gam(8, 28, {0..27}%16)"
    |+ note (scale scl "{0..5}%3")
    |+ note (-0.398)
    # n 2
    # legato 4.0
    -- |- note (choose[0, 12, 24])    
    # pan (rand)
    # gain 1.8  
  d4
    $ sometimesBy 0.5 (fast 2)
    $ s "superbass(3, 7)"
    |+ note (scale scl (choose[0..5]))
    |- note 36
    |+ note "[-0.04, 0.04]"
    |+ note (-0.398)
    # lpf (range 100 4000 $ rand) # resonance 0.3
    # attack 4.0
    # legato 2.0
    # release 2.0
    # leslie 0.5 # lrate 0.2 # lsize 0.3
    -- # room 0.1 # size 0.9
    # gain 2
  d5
    $ sometimesBy 0.5 (fast 2)
    $ s "[uni(3, 7), hc(5, 14, 1)]"
    # gain 2

d4 silence >> d5 silence

unsolo 1


